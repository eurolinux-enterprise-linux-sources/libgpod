<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>iPod database reading/writing</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="libgpod Reference Manual">
<link rel="up" href="itunesdb.html" title="Part&#160;I.&#160;iPod database">
<link rel="prev" href="itunesdb.html" title="Part&#160;I.&#160;iPod database">
<link rel="next" href="libgpod-File-handling-functions.html" title="File handling functions">
<meta name="generator" content="GTK-Doc V1.9 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="part" href="itunesdb.html" title="Part&#160;I.&#160;iPod database">
<link rel="chapter" href="ch01.html" title="iPod database components">
<link rel="part" href="photodb.html" title="Part&#160;II.&#160;Photo database">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="itunesdb.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="itunesdb.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">libgpod Reference Manual</th>
<td><a accesskey="n" href="libgpod-File-handling-functions.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2696882" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2629897" class="shortcut">Description</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="libgpod-The-Itdb-iTunesDB-structure"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2696882"></a><span class="refentrytitle">iPod database reading/writing</span>
</h2>
<p>iPod database reading/writing &#8212; Functions to read, write, and create an iPod database</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">



                    <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a>;
enum                <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbFileError">ItdbFileError</a>;
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a>*      <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-new">itdb_new</a>                            (void);
void                <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-free">itdb_free</a>                           (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a>*      <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-parse">itdb_parse</a>                          (const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *mp,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-write">itdb_write</a>                          (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);
void                <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-set-mountpoint">itdb_set_mountpoint</a>                 (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb,
                                                         const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *mp);
const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a>*        <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-get-mountpoint">itdb_get_mountpoint</a>                 (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-init-ipod">itdb_init_ipod</a>                      (const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *mountpoint,
                                                         const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *model_number,
                                                         const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *ipod_name,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>             <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-tracks-number">itdb_tracks_number</a>                  (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>             <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-tracks-number-nontransferred">itdb_tracks_number_nontransferred</a>   (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>             <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-playlists-number">itdb_playlists_number</a>               (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);
void                (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbUserDataDestroyFunc">*ItdbUserDataDestroyFunc</a>)          (<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a> userdata);
<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>            (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbUserDataDuplicateFunc">*ItdbUserDataDuplicateFunc</a>)        (<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a> userdata);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2629897"></a><h2>Description</h2>
<p>
These functions are for reading, writing, creating, and deleting an iPod
database and getting the total number of tracks and playlists.
</p>
<p>
Overview of using an iPod database:
</p>
<p>
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-parse"><code class="function">itdb_parse()</code></a>: read the iTunesDB and ArtworkDB
</p>
<p>
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-write"><code class="function">itdb_write()</code></a>: write the iTunesDB and ArtworkDB
</p>
<p>
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-parse"><code class="function">itdb_parse()</code></a> will return a <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a> structure with GLists
containing all tracks the playlists in the database.  Each track is
represented by an <a class="link" href="libgpod-Tracks.html#Itdb-Track"><span class="type">Itdb_Track</span></a>.   Each playlist is represented by an
<a class="link" href="libgpod-Playlists.html#Itdb-Playlist"><span class="type">Itdb_Playlist</span></a>.  See the <a class="link" href="libgpod-Tracks.html" title="Tracks">Tracks</a>
and <a class="link" href="libgpod-Playlists.html" title="Playlists">Playlists</a> sections for
details on tracks and playlists, respectively.
</p>
<p>
Each <a class="link" href="libgpod-Playlists.html#Itdb-Playlist"><span class="type">Itdb_Playlist</span></a> has a GList called <em class="parameter"><code>members</code></em> which contains all of
the tracks in the playlist.  Tracks referenced in a playlist must also
be present in the <em class="parameter"><code>tracks</code></em> GList of the <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>.
</p>
<p>
The iPod must contain one master playlist (MPL) containing all tracks
accessible on the iPod through the Music-&gt;Tracks/Albums/Artists/etc.
menu.  In addition to the MPL there can be a number of normal
playlists accessible through the Music-&gt;Playlists menu on the iPod.
Tracks that are a member of one of these normal playlists must also be
a member of the MPL.
</p>
<p>
The Podcasts playlist is just another playlist with some internal
flags set differently.  Tracks in the Podcasts playlist are not
normally members of the MPL (so on the iPod they will only show up
under the Podcasts menu). All tracks referenced must be in the
<em class="parameter"><code>tracks</code></em> GList of the <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>, however.
</p>
<p>
Each track may have a thumbnail associated with it. You can retrieve a
<a
href="/usr/share/gtk-doc/html/gdk/gdk-Bitmaps-and-Pixmaps.html#GdkPixmap"
><span class="type">GdkPixmap</span></a> of the thumbnail using <a class="link" href="libgpod-Artwork.html#itdb-artwork-get-pixbuf"><code class="function">itdb_artwork_get_pixbuf()</code></a>.  A
thumbnail can be added with <a class="link" href="libgpod-Tracks.html#itdb-track-set-thumbnails"><code class="function">itdb_track_set_thumbnails()</code></a>.  A thumbnail
can be removed with <a class="link" href="libgpod-Tracks.html#itdb-track-remove-thumbnails"><code class="function">itdb_track_remove_thumbnails()</code></a>.  Please see the
<a class="link" href="libgpod-Artwork.html" title="Artwork">Artwork</a> section for more
details on artwork related functions and structures.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>
Be aware that iTunes additionally stores the artwork as tags
in the original music file. That's also from where the data is
read when artwork is displayed in iTunes, and there can be more
than one piece of artwork. libgpod does not store the artwork as
tags in the original music file. As a consequence, if iTunes
attempts to access the artwork, it will find none, and remove
libgpod's artwork. Luckily, iTunes will only attempt to access
the artwork if you select a track in iTunes.  To work around
this, gtkpod keeps a list of the original filename of all
artwork and silently adds the thumbnails if they were 'lost'.
Your application might want to do something similar, or you can
supply patches for (optionally!) adding tags to the original music
files.
</p>
</div>
<p>
The <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>, <a class="link" href="libgpod-Playlists.html#Itdb-Playlist"><span class="type">Itdb_Playlist</span></a> and <a class="link" href="libgpod-Tracks.html#Itdb-Track"><span class="type">Itdb_Track</span></a> structures each
have <em class="parameter"><code>userdata</code></em> and <em class="parameter"><code>usertype</code></em> fields that can be used by the
application to store additional application-specific data. If
<em class="parameter"><code>userdata</code></em> is a pointer to an external structure, you can supply a
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbUserDataDuplicateFunc"><span class="type">ItdbUserDataDuplicateFunc</span></a> and a <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbUserDataDestroyFunc"><span class="type">ItdbUserDataDestroyFunc</span></a> so that this
data can be duplicated or freed automatically with a call to the
library <code class="function">_duplicate()</code>/<code class="function">_free()</code> functions.
</p>
</div>
<div class="refsect1" lang="en">
<a name="id2634654"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2634665"></a><h3>
<a name="Itdb-iTunesDB"></a>Itdb_iTunesDB</h3>
<a class="indexterm" name="id2634677"></a><pre class="programlisting">typedef struct {
    GList *tracks;
    GList *playlists;
    gchar *filename;
    Itdb_Device *device;
    guint32 version;
    guint64 id;
    /* reserved for future use */
    gint32 reserved_int1;
    gint32 reserved_int2;
    gpointer reserved1;
    gpointer reserved2;
    /* below is for use by application */
    guint64 usertype;
    gpointer userdata;
    /* functions called to duplicate/free userdata */
    ItdbUserDataDuplicateFunc userdata_duplicate;
    ItdbUserDataDestroyFunc userdata_destroy;
} Itdb_iTunesDB;
</pre>
<p>
Structure representing an iTunes database</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Doubly-Linked-Lists.html#GList"
>GList</a>&#160;*<em class="structfield"><code>tracks</code></em>;</span></p></td>
<td>             A list of tracks in the database (<a class="link" href="libgpod-Tracks.html#Itdb-Track"><span class="type">Itdb_Track</span></a>)
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Doubly-Linked-Lists.html#GList"
>GList</a>&#160;*<em class="structfield"><code>playlists</code></em>;</span></p></td>
<td>          A list of playlists in the database (<a class="link" href="libgpod-Playlists.html#Itdb-Playlist"><span class="type">Itdb_Playlist</span></a>)
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a>&#160;*<em class="structfield"><code>filename</code></em>;</span></p></td>
<td>           The filename of the iTunesDB
</td>
</tr>
<tr>
<td><p><span class="term"><a class="link" href="libgpod-Device.html#Itdb-Device">Itdb_Device</a>&#160;*<em class="structfield"><code>device</code></em>;</span></p></td>
<td>             iPod device info (<a class="link" href="libgpod-Device.html#Itdb-Device"><span class="type">Itdb_Device</span></a>)
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>&#160;<em class="structfield"><code>version</code></em>;</span></p></td>
<td>            The version number of the iTunesDB
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint64"
>guint64</a>&#160;<em class="structfield"><code>id</code></em>;</span></p></td>
<td>                 A 64 bit id value for the iTunesDB
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint32"
>gint32</a>&#160;<em class="structfield"><code>reserved_int1</code></em>;</span></p></td>
<td>      Reserved for future use
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint32"
>gint32</a>&#160;<em class="structfield"><code>reserved_int2</code></em>;</span></p></td>
<td>      Reserved for future use
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>&#160;<em class="structfield"><code>reserved1</code></em>;</span></p></td>
<td>          Reserved for future use
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>&#160;<em class="structfield"><code>reserved2</code></em>;</span></p></td>
<td>          Reserved for future use
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint64"
>guint64</a>&#160;<em class="structfield"><code>usertype</code></em>;</span></p></td>
<td>           For use by application
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>&#160;<em class="structfield"><code>userdata</code></em>;</span></p></td>
<td>           For use by application
</td>
</tr>
<tr>
<td><p><span class="term"><a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbUserDataDuplicateFunc">ItdbUserDataDuplicateFunc</a>&#160;<em class="structfield"><code>userdata_duplicate</code></em>;</span></p></td>
<td> A function to duplicate <span class="type">userdata</span>
</td>
</tr>
<tr>
<td><p><span class="term"><a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#ItdbUserDataDestroyFunc">ItdbUserDataDestroyFunc</a>&#160;<em class="structfield"><code>userdata_destroy</code></em>;</span></p></td>
<td>   A function to free <span class="type">userdata</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2678534"></a><h3>
<a name="ItdbFileError"></a>enum ItdbFileError</h3>
<a class="indexterm" name="id2678546"></a><pre class="programlisting">typedef enum
{
    ITDB_FILE_ERROR_SEEK,
    ITDB_FILE_ERROR_CORRUPT,
    ITDB_FILE_ERROR_NOTFOUND,
    ITDB_FILE_ERROR_RENAME,
    ITDB_FILE_ERROR_ITDB_CORRUPT
} ItdbFileError;
</pre>
<p>
Error codes for iTunesDB file</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><a name="ITDB-FILE-ERROR-SEEK:CAPS"></a><code class="literal">ITDB_FILE_ERROR_SEEK</code></span></p></td>
<td>         file corrupt: illegal seek occured
</td>
</tr>
<tr>
<td><p><span class="term"><a name="ITDB-FILE-ERROR-CORRUPT:CAPS"></a><code class="literal">ITDB_FILE_ERROR_CORRUPT</code></span></p></td>
<td>      file corrupt
</td>
</tr>
<tr>
<td><p><span class="term"><a name="ITDB-FILE-ERROR-NOTFOUND:CAPS"></a><code class="literal">ITDB_FILE_ERROR_NOTFOUND</code></span></p></td>
<td>     file not found
</td>
</tr>
<tr>
<td><p><span class="term"><a name="ITDB-FILE-ERROR-RENAME:CAPS"></a><code class="literal">ITDB_FILE_ERROR_RENAME</code></span></p></td>
<td>       file could not be renamed
</td>
</tr>
<tr>
<td><p><span class="term"><a name="ITDB-FILE-ERROR-ITDB-CORRUPT:CAPS"></a><code class="literal">ITDB_FILE_ERROR_ITDB_CORRUPT</code></span></p></td>
<td> iTunesDB in memory corrupt
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2678683"></a><h3>
<a name="itdb-new"></a>itdb_new ()</h3>
<a class="indexterm" name="id2678695"></a><pre class="programlisting"><a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a>*      itdb_new                            (void);</pre>
<p>
Creates a new Itdb_iTunesDB with the unknowns filled in to reasonable
values.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a newly created Itdb_iTunesDB to be freed with <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-free"><code class="function">itdb_free()</code></a>
when it's no longer needed
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2678746"></a><h3>
<a name="itdb-free"></a>itdb_free ()</h3>
<a class="indexterm" name="id2678759"></a><pre class="programlisting">void                itdb_free                           (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);</pre>
<p>
Free the memory taken by <em class="parameter"><code>itdb</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td> an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2678822"></a><h3>
<a name="itdb-parse"></a>itdb_parse ()</h3>
<a class="indexterm" name="id2678834"></a><pre class="programlisting"><a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a>*      itdb_parse                          (const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *mp,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);</pre>
<p>
Parse the Itdb_iTunesDB of the iPod located at <em class="parameter"><code>mp</code></em></p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mp</code></em>&#160;:</span></p></td>
<td>     mount point of the iPod (eg "/mnt/ipod") in local encoding
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td>  return location for a <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
><span class="type">GError</span></a> or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> a newly allocated <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a> struct holding the tracks and
the playlists present on the iPod at <em class="parameter"><code>mp</code></em>, NULL if <em class="parameter"><code>mp</code></em> isn't an iPod mount
point. If non-NULL, the <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a> is to be freed with <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#itdb-free"><code class="function">itdb_free()</code></a> when
it's no longer needed
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2678967"></a><h3>
<a name="itdb-write"></a>itdb_write ()</h3>
<a class="indexterm" name="id2678979"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            itdb_write                          (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);</pre>
<p>
Write out an iTunesDB. It reassigns unique IDs to all tracks. 
An existing "Play Counts" file is renamed to "Play Counts.bak" if
the export was successful.
An existing "OTGPlaylistInfo" file is removed if the export was
successful.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td>   the <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a> to write to disk
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td>  return location for a <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
><span class="type">GError</span></a> or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> TRUE on success, FALSE on error, in which case <em class="parameter"><code>error</code></em> is
set accordingly.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679085"></a><h3>
<a name="itdb-set-mountpoint"></a>itdb_set_mountpoint ()</h3>
<a class="indexterm" name="id2679100"></a><pre class="programlisting">void                itdb_set_mountpoint                 (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb,
                                                         const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *mp);</pre>
<p>
Sets the mountpoint of <em class="parameter"><code>itdb</code></em>. Always use this function to set the
mountpoint of an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a> as it will reset the number of
available /iPod_Control/Music/F.. dirs. It doesn't attempt to parse
an iPod database that may be present on the iPod at <em class="parameter"><code>mp</code></em>.
</p>
<p>
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>Calling this function removes the artwork in the
<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a> database using this <a class="link" href="libgpod-Device.html#Itdb-Device"><span class="type">Itdb_Device</span></a> which was read from the
iPod.</p>
</div>
<p>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td>   an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>mp</code></em>&#160;:</span></p></td>
<td>     new mount point
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.1.3
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679231"></a><h3>
<a name="itdb-get-mountpoint"></a>itdb_get_mountpoint ()</h3>
<a class="indexterm" name="id2679245"></a><pre class="programlisting">const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a>*        itdb_get_mountpoint                 (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);</pre>
<p>
Retrieve a reference to the mountpoint of <em class="parameter"><code>itdb</code></em></p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td> an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the <em class="parameter"><code>itdb</code></em> mountpoint, this string shouldn't be freed
nor modified

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.4.0
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679333"></a><h3>
<a name="itdb-init-ipod"></a>itdb_init_ipod ()</h3>
<a class="indexterm" name="id2679347"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            itdb_init_ipod                      (const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *mountpoint,
                                                         const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *model_number,
                                                         const <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a> *ipod_name,
                                                         <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);</pre>
<p>
Initialise an iPod device from scratch. The function attempts to
create a blank database, complete with master playlist and device
information as well as the directory structure required for the
type of iPod.
<em class="parameter"><code>model_number</code></em> is used to tell libgpod about the exact iPod
model, which is needed for proper artwork writing. <em class="parameter"><code>model_number</code></em> can be
found from the table returned by itdb_device_get_ipod_info_table (for
example). On recent distros with iPods released
in the last few years (starting with the iPod Color), it should be fine
to pass in a NULL <em class="parameter"><code>model_number</code></em> while still getting artwork writing.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mountpoint</code></em>&#160;:</span></p></td>
<td>   the iPod mountpoint
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>model_number</code></em>&#160;:</span></p></td>
<td> the iPod model number, can be NULL
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>ipod_name</code></em>&#160;:</span></p></td>
<td>    the name to give to the iPod. Will be displayed in
               gtkpod or itunes
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em>&#160;:</span></p></td>
<td>        return location for a <a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
><span class="type">GError</span></a> or NULL
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> TRUE when successful, FALSE if a failure has occurred.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since  0.4.0
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679515"></a><h3>
<a name="itdb-tracks-number"></a>itdb_tracks_number ()</h3>
<a class="indexterm" name="id2679527"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>             itdb_tracks_number                  (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);</pre>
<p>
Counts the number of tracks stored in <em class="parameter"><code>itdb</code></em></p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td> an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the number of tracks in <em class="parameter"><code>itdb</code></em>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679605"></a><h3>
<a name="itdb-tracks-number-nontransferred"></a>itdb_tracks_number_nontransferred ()</h3>
<a class="indexterm" name="id2679618"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>             itdb_tracks_number_nontransferred   (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);</pre>
<p>
Counts the number of non-transferred tracks in <em class="parameter"><code>itdb</code></em></p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td> an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the number of tracks in <em class="parameter"><code>itdb</code></em> that haven't been transferred
to the iPod yet (ie the number of <a class="link" href="libgpod-Tracks.html#Itdb-Track"><span class="type">Itdb_Track</span></a> in which the transferred field
is false)
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679704"></a><h3>
<a name="itdb-playlists-number"></a>itdb_playlists_number ()</h3>
<a class="indexterm" name="id2679716"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#guint32"
>guint32</a>             itdb_playlists_number               (<a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB">Itdb_iTunesDB</a> *itdb);</pre>
<p>
Counts the number of playlists stored in <em class="parameter"><code>itdb</code></em></p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>itdb</code></em>&#160;:</span></p></td>
<td> an <a class="link" href="libgpod-The-Itdb-iTunesDB-structure.html#Itdb-iTunesDB"><span class="type">Itdb_iTunesDB</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> the number of playlists in <em class="parameter"><code>itdb</code></em> (including the master 
playlist)
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679794"></a><h3>
<a name="ItdbUserDataDestroyFunc"></a>ItdbUserDataDestroyFunc ()</h3>
<a class="indexterm" name="id2679806"></a><pre class="programlisting">void                (*ItdbUserDataDestroyFunc)          (<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a> userdata);</pre>
<p>
Function called to free userdata</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>userdata</code></em>&#160;:</span></p></td>
<td> A <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
><span class="type">gpointer</span></a> to user data
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2679863"></a><h3>
<a name="ItdbUserDataDuplicateFunc"></a>ItdbUserDataDuplicateFunc ()</h3>
<a class="indexterm" name="id2679875"></a><pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>            (*ItdbUserDataDuplicateFunc)        (<a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a> userdata);</pre>
<p>
Function called to duplicate userdata</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>userdata</code></em>&#160;:</span></p></td>
<td> A <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
><span class="type">gpointer</span></a> to user data
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></p></td>
<td> A <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
><span class="type">gpointer</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2679950"></a><div class="refsect2" lang="en"><a name="id2679951"></a></div>
<hr>
<div class="refsect2" lang="en"><a name="id2679952"></a></div>
</div>
</div>
</body>
</html>
